<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-
2.dtd">

<sqlMap namespace="Category">
	<resultMap id="CategoryList" class="Category">
		<result property="categoryId" column="category_id" />
		<result property="categoryName" column="category_name" />
		<result property="userId" column="user_id" />
		
	</resultMap>
	
	<insert id="addCategory" parameterClass="Category">
		insert into category
		(category_name,user_id)
		values (#categoryName#,#userId#)
		
		<selectKey keyProperty="categoryId" resultClass="int">
			select LAST_INSERT_ID()
		</selectKey>
	</insert>
	
	<select id="categoryList" parameterClass="String" resultMap="CategoryList">
		SELECT 
			category_id,
			category_name,
			user_id
		FROM category 
		WHERE user_id=#userId#
	</select>
	
	<select id="isExistCategory" parameterClass="java.util.HashMap" resultClass="Category">
		SELECT 
			category_id,
			category_name,
			user_id
		FROM category 
		WHERE category_name=#categoryName# AND user_id=#userId#
	</select>
	
	<delete id="deleteCategory" parameterClass="java.util.HashMap">
		DELETE FROM category WHERE category_name=#categoryName# AND user_id=#userId#
	</delete>
	
	
	
</sqlMap>